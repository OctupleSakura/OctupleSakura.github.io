---
title: 浅谈git工作流
copyright: true
date: 2018-08-26 13:02:19
tags:
- 技术
- git
categories: 
- 技术
---
### 谈谈最近的情况
  最近感受了一下什么叫--在学校被学长吊打，在公司被前辈吊打QAQ。
  嘛，彻底成为码农了QAQ，工作很饱和回家也要看日语于是空余时间便更少了(难得能撸一篇文章)，当然我的博客都是我在自嗨，自己看的开心就好啦~

### 浅谈git的工作流
  近期为了帮公司的另一个项目处理一些简单的需求，因此在以合理的git团队开发为条件的情况下学习了一些这方面的知识，ojbk，我简单的放一下整个流程再来说一下一些命令的作用= =
  <!--more-->

#### 整体流程
   ![git-flow](https://github.com/OctupleSakura/showImg/blob/master/blog/git-flow.png?raw=true)
&ensp;先说明我们是在本地部署了 **gitlab**的情况下进行的，上图是我们在做git开发的一个流程，当然这个只是对于我们团队的，并且我画的也不一定全对，ok那我来扯皮一下。  
#### 具体说明
##### 1. 保证本地的master与远端的master同步 
  在开新分支之前，一定要保证master分支本地与远端 **同步**。  
  怎么同步呢？用 **pull**和 **fetch**命令，可以强制覆盖没关系，本地怎么玩都好一定不要影响到远端的master。老哥给我的建议是 **f
etch -f** 去覆盖本地，因为 **pull**实际上是两步操作，分别是merge和fetch。  
  这里再简单的引申两个简单的概念，分别是 **FETCH_HEAD**(版本链接)和 **commit-id**(每次commit的时候会产生的一个id，通过这个id我们可以去回退版本或者来进行一些其他的操作，push之后这个id也会保存到远端)。  
  这样才能保证你之后再合并分支的时候不会出现问题，至于是什么问题后面会再提到。
##### 2. 在保证master是最新的情况下开分支
  那么在保证了master是最新的情况下，我们此时需要在此基础上开发新的功能，那么这时候我们就需要切一个新的分支，来进行这个功能的开发。  
  那么就直接 **git checkout -b '功能分支'**  
  这个命令是创建并切换到新的分支,此时我们就进到了新的分支当中
##### 3.在开发完成的时rebase master分支
  **rebase** 又是何许操作呢？这里扯回我们刚才那个问题，譬如我们的master并不是最新的，而是0.1版本，那更新的版本是0.2版本，这个时候我们切出来开发，那么在合并的时候，由于master并不是最新的会导致不必要的冲突，因为我们的源码当中并没有新版本的一些东西，在 **merge request**的会在commit里面看到我们提交了新版本中多出来的那些文件。  
  那这个时候我们就需要在合并之前，将本地的分支与更新到与master相同的一个版本，那就是rebase(翻译过来叫变基2333333)，可以把在一个分支里提交的改变再转移到我们新开的分支里。  
  和merge不同，rebase并不会产生新的提交对象，在进行了rebase操作之后我们再去push到远程的分支就一般不会产生问题(当然，是一般)。  
##### 4.commit/push
  ok,rebase之后，我们就需要提交我们的代码到远程分支当中了，就是常用的commit和push啦，commit这里要说明一下。大多数在commit这块都需要做些文章，为什么呢？因为这里就是要说明我们做了些什么，修复了某些bug？或者完成了一些新的功能？
  如果只是自己玩自己的项目的话，瞎jb写就完了,git commit -m 'fuck'。  
  但是如果是团队开发，那么一般都需要遵守通用的规则，先git commit，然后 <type>: <subject> 这样的一个格式去阐释我们做了一些什么type里面有几个固定的类型:
- feat：新功能（feature）
- fix：修补bug
- docs：文档（documentation）
- style： 格式（不影响代码运行的变动）
- refactor：重构（即不是新增功能，也不是修改bug的代码变动）
- test：增加测试
- chore：构建过程或辅助工具的变动  
后面再说明本次提交的改动就ok了。  

##### 5.merge request
  当一切完成，成功提交了当前的改动到远程分支之后，就需要提交merge request，那么这时候负责维护master分支的老哥会查看你到底做了哪一些改动，确定没问题之后将分支合并，然后就可以删除掉开发的分支了。
#### 小结
  标准这个东西，永远都是针对自身来确定的，因此也不要盲目的就套用通用的标准，毕竟合适自己的才是最好的。
  当然，其中有一些原理我没法阐述出来(弱鸡)，因此如果有兴趣还可以多去看看背后的一些原理啦~