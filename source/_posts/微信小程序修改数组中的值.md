---
title: 微信小程序修改数组中的值
date: 2018-05-20 19:25:06
tags: 微信小程序
categories: 技术
---
### 场景
首先是我拿到了一个番组的数据,他的格式是经过处理的,格式如下
```js
comicData:{
   "0":[
      "0":{
          'title':'xxxx' 
       },
       "1":{
          'title':'xxxx' 
       }
    ]
}
```
然后我需要只修改特定的值,而不是更新整个数组 = =
<!-- more -->
### 踩坑过程
于是经过一番百度,基本上都是一个方法,即将key转换为字符串,在setdata的时候用中括号括起来,大概是下面这个样子的
```js
 onLoad: function () {
       var that=this;
       var up = "info[" + 0 + "].gMoney";//先用一个变量，把(info[0].gMoney)用字符串拼接起来
       that.setData({
         [up]:1
       })
   }
```
[原文链接](https://www.cnblogs.com/Mrrabbit/p/7680934.html)  
嘛然后就大概跟着他这样做了,写了如下一段代码
```js
  showList:function(){
       let key = "comicData["+i+"]["+ii+"].title";
       this.setData({
           [key ]:'a'
       })
  }
```
好,然后开始尝试运行,结果发现,竟然整个数组被替换了？？？QAQ
### 解决问题
嘛可能有老哥看到上面代码已经知道什么问题了,我直接贴出解决代码。
```js
  showList:function(){
       let key = "comicData."+i+"["+ii+"].title";
       this.setData({
           [key ]:'a'
       })
  }
```
可以get到吗,实际上这个问题很蠢QAQ,上面的数据结构中我最外面是一个object。  

然后我是用object["key"]这种方式去获取的,嘛 其实在代码中正常获取是没有问题的,但是当这个作为setData的参数的时候,那么就出现问题了。  

**结论**:小程序中如果要修改数组或者对象的值的时候,数组一定是[key],object一定是xxx.key
如果是对象包数组数组包对象的话那一定要区分好,不然处理复杂结构的时候容易踩坑(哭